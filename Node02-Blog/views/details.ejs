<!DOCTYPE html>
<html lang="en">
<%- include('./partials/head.ejs') %>
<body>
    <div class="row">
        <div class="col-3 bg-warning"></div>
        <div class="col-6">
            <h1 class="text-center index-h1">
                <%=blog.title%>
            </h1>
            <hr/>
            <div class="row">
                <p class="col-10">
                    <%=blog.body%>
                </p>
                <div class="col-2">
                    <a  class="delete" data-doc =`/blog/<%=blog._id%>`>Delete</a>
                </div>
            </div>
            
            <hr class="home-hr"/>
        </div>
        <div class="col-3 bg-warning"></div>
    </div>
    <%- include('./partials/footer.ejs') %>

    <script>
        const deleteIcon = document.querySelector('a.delete')
        deleteIcon.addEventListener('click',(e)=>{
            const endpoint = `/blog/<%=blog._id%>`

            fetch(endpoint, {
                method: 'DELETE'
            })
            .then(response => response.json())
            .then(data => window.location = data.redirect)
        })
    </script>
</body>
</html>